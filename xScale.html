<!-- TODO: 
	pixel(value) 
	value(pixel)
	center large bin on main rather than bin
	do not displa too small bins
--> 
<html><head>
	<meta charset="utf-8" />
	<style>
		* { font-family: sans-serif; font-size: small; }
		#main { position: relative; margin: 50px; height: 100px; background: whitesmoke; 
			overflow: hidden}
		#main * { background: lightyellow; }

	</style>
	
</head><body>
	<div id="main"></div>

<script>
HTMLElement.prototype.xScale = function(min, max){

	// Redraw
	this.draw = (min, max) => {
		if(!min) min = this.min;
		if(!max) max = this.max;
		this.innerHTML = '';
		for(var t = Math.floor(min)-1; t<=max; t++){
			var x = (t-min) / (max-min) * this.offsetWidth;
			var dx = this.offsetWidth / (max-min);
			var style = 'position: absolute; top:0; border-left: 1px solid grey; text-align: center; ';
			style += 'left:'+x+'px; width: '+dx+'px; ';
			this.innerHTML += '<div class="bin" style="'+style+'">'+t+'</div>';
		}
	}
	
	// Translation
	this.onmousedown = (event) => {
		this.drag = event.clientX - this.offsetLeft;
	}
	this.onmousemove = (event) => {
		if(this.drag){
			var x = event.clientX - this.offsetLeft;
			var min = (this.drag-x)/this.offsetWidth *(this.max-this.min) + this.min;
			var max = (this.drag-x)/this.offsetWidth * (this.max-this.min) + this.max;
			this.draw(min, max);
		}
	}
	this.onmouseup = (event) => {
		if(this.drag){
			var x = event.clientX - this.offsetLeft;
			var min = (this.drag-x)/this.offsetWidth * (this.max-this.min) + this.min;
			var max = (this.drag-x)/this.offsetWidth * (this.max-this.min) + this.max;
			this.min = min;
			this.max = max;
			this.draw();
		}
		this.drag = null;
	}
	//Dilatation
	this.onwheel = (event) => {
		var x = event.clientX - this.offsetLeft;
		var t = x/this.offsetWidth * (this.max-this.min) + this.min;
		this.min = (1+event.deltaY/100)*(this.min-t) + t;
		this.max = (1+event.deltaY/100)*(this.max-t) + t;
		this.draw();
	}

	// Intitalize
	this.min = min;
	this.max = max;
	this.drag = null;
	this.scale = document.createElement('div');
	this.scale.innerHTML = 'scale';
	this.appendChild(this.scale);
	this.draw();
}

document.getElementById('main').xScale(10, 30);
</script>

</body></html>
